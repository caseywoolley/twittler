<!DOCTYPE html>
<html>
  <head>
    <title>Twittler</title>
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/data_generator.js"></script>
  </head>
  <body>

    <header><h1>Twittler</h1></header>
    <nav>
      <ul></ul>
    </nav>
    <div class="container">
      <section>
      <ul class="tweets"></ul>
      </section>
    </div>
    <footer><h3>Twittler</h3></footer>

    <script>
      // home = my tweets + followed

      $(document).ready(function(){

        var $tweets = $('.tweets');
        $tweets.html('');
        var newTweets;
        var currentTweets = 0;
        var limit = 20;
        var tweetCount = 0; //temporary

        console.log(users);
        console.log(streams);

        var showTweets = function(index, shown){
          while(index >= shown){
            tweetCount += 1;
            var tweet = streams.home[index];
            var $tweet = $('<li>', { class: 'tweet' });
            var $user = $('<a>', {
              href: '#',
              class: 'username',
              text: "@" + tweet.user
            });
            var $message = $('<span>', {
              class: 'message',
              text: tweet.message
            });
            var $timeStamp = $('<small>', {
              class: 'time-stamp',
              html: $('<time>', {
                text: tweet.created_at
              })
            });
            var $count = $('<div>', { //temporary
                text: tweetCount
            });
            $tweet
              .append($user)
              .append($message)
              .append($timeStamp)
              .append($count); //temporary
            $tweet.prependTo($tweets);
            index -= 1;
          }
        }

        var checkTweets = function() {
          newTweets = streams.home.length - 1;
          showTweets(newTweets, currentTweets);
          currentTweets = newTweets + 1;
          $tweets.find('li:nth-child(n+' + limit + ')').remove();
          setTimeout(checkTweets, 500);
        };
        checkTweets();
      });

    </script>
  </body>
</html>
